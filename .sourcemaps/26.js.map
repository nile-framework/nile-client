{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"26.js","sourcesContent":["import { NgModule } from '@angular/core';\n\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { HomePage } from './home';\n\n@NgModule({\n  declarations: [\n    HomePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(HomePage),\n    TranslateModule.forChild()\n  ],\n})\nexport class HomePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\n\nimport { IonicPage, NavController, NavParams, Loading, AlertController, LoadingController } from 'ionic-angular';\n\n// import * as firebase from 'firebase/app';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { AngularFireDatabase } from 'angularfire2/database';\n\nimport { AuthProvider } from '../../providers/auth/auth';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html',\n})\nexport class HomePage {\n\n  public loading: Loading;\n\n  // TODO: we should make a user interface\n  user: any;\n\n  initialInfoForm: FormGroup;\n  initialInfoFormSubmitted: boolean = false;\n  public authorized;\n\n  // if the users initial company information hasn't been submitted yet, display a form asking for the information.\n  displayInitialCompanyForm: boolean = false;\n\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    private _authProvider: AuthProvider,\n    private _fb: FormBuilder,\n    private _afAuth: AngularFireAuth,\n    private _afDb: AngularFireDatabase\n  ) {\n    this._authProvider.authState.subscribe( authState => {\n      if ( authState === true){\n        this.authorized = true;\n      } else {\n        this.authorized = false;\n      }\n    });\n    \n    this._authProvider.user.subscribe( user => {\n      this.user = user;\n      console.log('user is ' + user);\n      console.dir(user);\n    })\n    \n    this._authProvider.comPosition.subscribe( comPosition => {\n      if (comPosition === 'owner') {\n        this._authProvider.authState.subscribe( authState => {\n          if (authState === 'initialSetup') {\n            // we display a form for the company owner to fill out with basic info for the company.\n            this.buildInitialInfoForm();\n            this.displayInitialCompanyForm = true;\n          }\n        })\n      } else if (comPosition === 'employee') {\n\n      }\n    })\n  }\n\n  ionViewDidLoad() {\n    \n  }\n\n  buildInitialInfoForm() {\n    this.initialInfoForm = this._fb.group({\n      name: ['', Validators.required],\n      email: [this.user.email, Validators.email],\n      phoneNumber: [this.user.phoneNumber, Validators.minLength(10)],\n      deliveriesPerWeek: ['', Validators.required]\n    })\n    \n\n    \n  }\n\n  startOrder() {\n  this.navCtrl.setRoot('NewOrderPage');\n  }\n\n  onSubmitInitialInfoForm() {\n    this._afDb.object(`companies/${this.user.company.id}`).update({\n      name: this.initialInfoForm.value.name,\n      email: this.initialInfoForm.value.email,\n      phoneNumber: this.initialInfoForm.value.phoneNumber,\n      estimatedDeliveryPerWeek: this.initialInfoForm.value.deliveriesPerWeek\n    }).then( snapshot => {\n      this.loading.dismiss();\n      this.initialInfoFormSubmitted = true;\n    })\n\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}