{"version":3,"sources":["../../src/pages/signup-fork/signup-fork.module.ts","../../src/pages/signup-fork/signup-fork.ts"],"names":[],"mappings":"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","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignupForkPage } from './signup-fork';\n\n@NgModule({\n  declarations: [\n    SignupForkPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignupForkPage),\n  ],\n})\nexport class SignupForkPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup-fork/signup-fork.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, Loading,\n  LoadingController, ToastController } from 'ionic-angular';\n\nimport * as firebase from 'firebase/app';\n\n@IonicPage()\n@Component({\n  selector: 'page-signup-fork',\n  templateUrl: 'signup-fork.html',\n})\nexport class SignupForkPage {\n\n  public loading: Loading;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    public toastCtrl: ToastController\n  ) {\n  }\n\n  ionViewDidLoad() {\n\n  }\n\n  companyInvite() {\n    let prompt = this.alertCtrl.create({\n      title: 'Enter access code',\n      message: \"Enter the access code your company gave you!\",\n      inputs: [\n        {\n          name: 'code',\n          placeholder: 'enter access code'\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Submit',\n          handler: data => {\n            let value = data.code;\n            this.verifyCode(value);\n          }\n        }\n      ]\n    });\n    prompt.present();\n  }\n\n  registerCompany() {\n    this.navCtrl.push('SignupBasicInfoPage');\n  }\n\n\n  // fetch the data and determine if the access code is correct\n  verifyCode(code: string) {    \n    this.fetchAccessCode(code).then( snapshot => {\n      this.loading.dismiss().then( _ => {\n        if (snapshot.val() === null) {\n          // incorrect access code\n          let prompt = this.alertCtrl.create({\n            title: 'Incorrect access code!',\n            message: \"Please reenter the access code.\",\n            inputs: [\n              {\n                name: 'code',\n                value: code,\n                placeholder: 'enter access code'\n              },\n            ],\n            buttons: [\n              {\n                text: 'Cancel',\n                handler: data => {\n                  console.log('Cancel clicked');\n                }\n              },\n              {\n                text: 'Submit',\n                handler: data => {\n                  let value = data.code;\n                  this.verifyCode(value);\n                }\n              }\n            ]\n          });\n          prompt.present();\n        } else {\n         if (snapshot.val() === true) {\n          // display toast saying code was correct, allow user to sign up.\n          let toast = this.toastCtrl.create({\n            message: 'Success!',\n            duration: 2500,\n            position: 'middle'\n          });\n          toast.present().then( _ => {\n            // now navigate to the employee sign up.\n          });\n         }\n        }\n      })\n    }, error => {\n      this.loading.dismiss().then( _ => {\n        let alert = this.alertCtrl.create({\n          title: error.name,\n          subTitle: error.message,\n          buttons: ['OK']\n        });\n        alert.present();\n      })\n    })\n\n    this.loading = this.loadingCtrl.create();\n    this.loading.present();\n  }\n\n\n  // TODO: move this function to a service\n  fetchAccessCode(code: string): firebase.Promise<any> {\n    // check the access code node\n    return firebase.database().ref(`companyAccessCode/${code}`).once('value');\n    \n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signup-fork/signup-fork.ts"],"sourceRoot":""}