{"version":3,"sources":["../../src/pages/order-pickup-location/order-pickup-location.module.ts","../../src/pages/order-pickup-location/order-pickup-location.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OrderPickupLocationPage } from './order-pickup-location';\n\n@NgModule({\n  declarations: [\n    OrderPickupLocationPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrderPickupLocationPage),\n  ],\n})\nexport class OrderPickupLocationPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-pickup-location/order-pickup-location.module.ts","import { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Component, OnInit } from '@angular/core';\n\nimport { IonicPage, NavController, NavParams, ViewController, Loading, LoadingController } from 'ionic-angular';\n\ndeclare var google: any;\n\n\n@IonicPage()\n@Component({\n  selector: 'page-order-pickup-location',\n  templateUrl: 'order-pickup-location.html',\n})\nexport class OrderPickupLocationPage implements OnInit {\n\n  public loading: Loading;\n\n  // form\n  pickupLocationForm: FormGroup;\n\n  autocompleteItems: any;\n  autocomplete: any;\n  acService:any;\n  placesService: any;\n\n  address:any = {\n    place: '',\n    set: false,\n  };\n  map: any;\n  markers = [];\n  placedetails: any;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    private _loadingCtrl: LoadingController,\n    private _fb: FormBuilder) {\n      this.buildPickupLocationForm();\n  }\n\n\n  ngOnInit() {\n    this.acService = new google.maps.places.AutocompleteService();        \n    this.autocompleteItems = [];\n    this.autocomplete = {\n        query: ''\n    };\n\n    this.initMap();\n    this.initPlacedetails();\n\n    let data = this.navParams.get('data');\n    if (data) {\n      console.log('temp is true');\n      this.address.place = data.address;\n      // get details\n      this.getPlaceDetail(data.place_id);\n  \n      // dismiss the list and set the value of the search bar\n      this.autocompleteItems = [];\n    } else {\n      // console.log('temps is false');\n    }\n  }\n\n  buildPickupLocationForm() {\n    this.pickupLocationForm = this._fb.group({\n      address: ['', Validators.required],\n      notes: ['']\n    });\n  }\n\n  onSubmit() {\n    if (this.pickupLocationForm.invalid) {\n\n    } else {\n      if (!this.pickupLocationForm.controls['notes'].pristine) {\n        this.placedetails.notes = this.pickupLocationForm.value.notes;\n\n        // now dismiss this Modal with the appropriate information.\n        this.viewCtrl.dismiss(this.placedetails);\n      } else {\n        this.viewCtrl.dismiss(this.placedetails);\n      }\n    }\n  }\n\n\n\n  cancel() {\n    this.viewCtrl.dismiss();\n  }\n\n  chooseItem(item: any) {\n    this.loading = this._loadingCtrl.create();\n    this.loading.present();\n    this.address.place = item.description;\n    // get details\n    this.getPlaceDetail(item.place_id);\n\n    this.autocomplete.query = '';\n\n    // dismiss the list and set the value of the search bar\n    this.autocompleteItems = [];\n  }\n\n  private reset() {\n    this.initPlacedetails();\n    this.address.place = '';\n    this.address.set = false;\n}\n\n\n  updateSearch() {\n    // console.log('modal > updateSearch');\n    if (this.autocomplete.query == '') {\n        this.autocompleteItems = [];\n        return;\n    }\n    let self = this;\n    let config = { \n        types:  [], // other types available in the API: 'establishment', 'regions', and 'cities'\n        input: this.autocomplete.query, \n        componentRestrictions: { country: 'US' } \n    }\n    this.acService.getPlacePredictions(config, function (predictions, status) {\n        // console.log('modal > getPlacePredictions > status > ', status);\n        self.autocompleteItems = [];            \n        predictions.forEach(function (prediction) {              \n            self.autocompleteItems.push(prediction);\n        });\n    });\n  }\n\n  private getPlaceDetail(place_id:string):void {\n    var self = this;\n    var request = {\n        placeId: place_id\n    };\n    this.placesService = new google.maps.places.PlacesService(this.map);\n    this.placesService.getDetails(request, callback);\n    function callback(place, status) {\n      if (status == google.maps.places.PlacesServiceStatus.OK) {\n          // console.log('page > getPlaceDetail > place > ', place);\n          // set full address\n          self.placedetails.address = place.formatted_address;\n          self.placedetails.place_id = place_id;\n          self.placedetails.name = place.name;\n          // self.placedetails.name = place.name;\n          // self.placedetails.lat = place.geometry.location.lat();\n          // self.placedetails.lng = place.geometry.location.lng();\n          // for (var i = 0; i < place.address_components.length; i++) {\n          //   let addressType = place.address_components[i].types[0];\n          //   let values = {\n          //     short_name: place.address_components[i]['short_name'],\n          //     long_name: place.address_components[i]['long_name']\n          //   }\n          //   // if(self.placedetails.components[addressType]) {\n          //   //   self.placedetails.components[addressType].set = true;\n          //   //   self.placedetails.components[addressType].short = place.address_components[i]['short_name'];\n          //   //   self.placedetails.components[addressType].long = place.address_components[i]['long_name'];\n          //   // }                                     \n          // }                  \n          // set place in map\n          self.map.setCenter(place.geometry.location);\n          self.createMapMarker(place);\n          // populate\n          self.address.set = true;\n          console.log('page > getPlaceDetail > details > ', self.placedetails);\n\n          // update the pickup location form.\n          self.pickupLocationForm.controls['address'].setValue(place.formatted_address);\n          self.loading.dismiss();\n      }else{\n          console.log('page > getPlaceDetail > status > ', status);\n          self.loading.dismiss();\n      }\n    }\n  }\n\n  private initMap() {\n    var point = {lat: 32.873028, lng: -96.936286}; \n    let divMap = (<HTMLInputElement>document.getElementById('map'));\n    this.map = new google.maps.Map(divMap, {\n        center: point,\n        zoom: 15,\n        disableDefaultUI: true,\n        draggable: false,\n        // draggable: true,\n        zoomControl: true\n    });\n  }\n\n  private createMapMarker(place:any):void {\n    var placeLoc = place.geometry.location;\n    var marker = new google.maps.Marker({\n      map: this.map,\n      position: placeLoc\n    });    \n    this.markers.push(marker);\n  }\n\n\n  private initPlacedetails() {\n    this.placedetails = {\n      address: '',\n      notes: '',\n      place_id: ''\n      // lat: '',\n      // lng: '',\n      // components: {\n      //   route: { set: false, short:'', long:'' },                           // calle \n      //   street_number: { set: false, short:'', long:'' },                   // numero\n      //   sublocality_level_1: { set: false, short:'', long:'' },             // barrio\n      //   locality: { set: false, short:'', long:'' },                        // localidad, ciudad\n      //   administrative_area_level_2: { set: false, short:'', long:'' },     // zona/comuna/partido \n      //   administrative_area_level_1: { set: false, short:'', long:'' },     // estado/provincia \n      //   country: { set: false, short:'', long:'' },                         // pais\n      //   postal_code: { set: false, short:'', long:'' },                     // codigo postal\n      //   postal_code_suffix: { set: false, short:'', long:'' },              // codigo postal - sufijo\n      // }    \n    };        \n  }  \n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-pickup-location/order-pickup-location.ts"],"sourceRoot":""}